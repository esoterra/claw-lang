import { now } from wasi:clocks/monotonic-clock;
import { level, log } from wasi:logging/logging;

import buzz as buzz-import: func(a: string) -> string;

let max-millis: u64 = 1000;

export func buzz(a: string) -> string {
    let start = now();
    let result = buzz-import(a);
    let end = now();
    if end - start > max-millis {
        log(level::warning, "profiling", "Calling foo:bar/fizz/buzz took a long time");
    }
    return result;
}
